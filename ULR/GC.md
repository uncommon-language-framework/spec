# ULR Garbage Collector

The ULR Garbage Collector uses a mark-and-sweep algorithm; it is currently not guaranteed to work properly for multiple threads. When an application uses over 2 GB of memory and has a more than 10 MB increase in memory usage since the last collection, the GC will halt execution of the program to perform a mark-and-sweep. It first uses special pointers initialized in the `Main(System.String[])` function and its caller function (usually `api->AllocateObject(size_t)`) to search through the stack. For every pointer-size sequence in the stack, it checks if the pointer value is an allocated pointer, and if so, marks it and searches all attributes of the object associated with that pointer for more references to mark. Although an integer or other value type value on the stack could resemble a valid allocated pointer value on the stack and trick the GC into thinking that an object is still alive, this case is improbable that it is not deemed as an issue at the moment. Additionally, it would not harm application behavior; it would merely keep an object that is not in use alive until the end of the application lifetime. After marking locals, the GC performs the same recursive marking process with static fields. Once all references have been marked, any object reference that has been allocated but not marked as still accessible by the application has its destructor called and is freed by the GC.